<!DOCTYPE html><html lang="en"><head><script>window.currentUser = null;</script><script>window.rateUsdToNative = 1;</script><title itemprop="name">Fetch</title><link href="/pack/styles.d6e712fda8b9d95f7338.css" rel="stylesheet"><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes, minimum-scale=1.0"><meta name="apple-mobile-web-app-capable" content="yes"><script>if (window.devicePixelRatio > 1) document.cookie = 'pixelRatio=' + window.devicePixelRatio + ';path=/;expires=Tue, 19 Jan 2038 03:14:07 GMT';</script><link href="//fonts.googleapis.com/css?family=Open+Sans:bold,italic,bolditalic" rel="stylesheet"><link rel="apple-touch-icon-precomposed" href="/img/favicon/apple-touch-icon-precomposed.png"><link rel="canonical" href="https://javascript.info/fetch"><meta name="msapplication-TileColor" content="#222A2C"><meta name="msapplication-TileImage" content="/img/favicon/tileicon.png"><link rel="icon" href="/img/favicon/favicon.png"><meta itemprop="image" content="https://javascript.info/img/site_preview_en_512x512.png"><meta property="og:title" content="Fetch"><meta property="og:image" content="https://javascript.info/img/site_preview_en_1200x630.png"><meta property="og:image:type" content="image/png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta property="fb:admins" content="100001562528165"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Fetch"><meta name="twitter:site" content="@iliakan"><meta name="twitter:creator" content="@iliakan"><meta name="twitter:image" content="https://javascript.info/img/site_preview_en_512x512.png"><link rel="prev" href="/network"><link rel="next" href="/formdata"><script>window.GA_ID = "UA-2056213-15";</script><script>window.YANDEX_METRIKA_ID = 32184394;</script><script>window.GoogleAnalyticsObject="ga",window.ga=function(){window.ga.q.push(arguments)},window.ga.q=[],window.ga.l=Date.now(),ga("create",GA_ID,"auto"),window.GTM_ID&&ga("require",GTM_ID),window.currentUser?ga("set","&uid",currentUser.id):ga("set","anonymizeIp",!0),window.addEventListener("error",function(e){var r=(e.filename||e.errorUrl)+": "+(e.lineno||e.errorLine),n=e.stack||e.error&&e.error.stack;ga("send","exception",{exDescription:e.message+" "+r+" "+n,exFatal:!0})});</script><script src="https://www.google-analytics.com/analytics.js" async></script><script>ga('send', 'pageview');</script><script>window.metrika={reachGoal:function(){}},window.yandex_metrika_callbacks=[function(){try{window.metrika=new Ya.Metrika({id:YANDEX_METRIKA_ID,webvisor:!0,clickmap:!0,params:{user:window.currentUser&&window.currentUser.id}}),metrika.trackLinks({delay:150}),window.addEventListener("error",function(r){window.metrika.reachGoal("JSERROR",{src:(r.filename||r.errorUrl)+": "+(r.lineno||r.errorLine),stack:r.stack||r.error&&r.error.stack,message:r.message})})}catch(r){}}];</script><script src="//mc.yandex.ru/metrika/watch.js" async></script><script>window.RECAPTCHA_ID = "6LfmLAEVAAAAAJMykMnf7aY8nkyTRmYi2ynx51R1";</script><script src="/pack/init.51e39bc929812b94c4a8.js"></script><script src="/pack/head.7a1dfd85e1f5c29a4840.js" defer></script><meta property="og:title" content="Fetch"><meta property="og:type" content="article"><script src="/pack/tutorial.a2cb726ed10a7d440094.js" defer></script><script src="/pack/footer.2786f555ff370bdde300.js" defer></script></head><body class="no-icons"><script>window.fontTest();</script><div class="page-wrapper page-wrapper_sidebar_on"><!--[if IE]><div style="color:red;text-align:center">Sorry, Internet Explorer is not supported, please use a newer browser.</div><![endif]--><div class="sitetoolbar sitetoolbar_tutorial"><script>window.langs = [{"code":"ar","name":"Arabic"},{"code":"az","name":"Azerbaijani"},{"code":"bg","name":"Bulgarian"},{"code":"bn","name":"Bengali"},{"code":"ca","name":"Catalan"},{"code":"cs","name":"Czech"},{"code":"da","name":"Danish"},{"code":"de","name":"German"},{"code":"el","name":"Greek"},{"code":"en","name":"English"},{"code":"es","name":"Spanish"},{"code":"fa","name":"Persian (Farsi)"},{"code":"fi","name":"Finnish"},{"code":"fr","name":"French"},{"code":"he","name":"Hebrew"},{"code":"hi","name":"Hindi"},{"code":"hr","name":"Croatian"},{"code":"hu","name":"Hungarian"},{"code":"hy","name":"Armenian"},{"code":"id","name":"Indonesian"},{"code":"it","name":"Italian"},{"code":"ja","name":"Japanese"},{"code":"ka","name":"Georgian"},{"code":"kk","name":"Kazakh"},{"code":"km","name":"Central Khmer"},{"code":"ko","name":"Korean"},{"code":"lt","name":"Lithuanian"},{"code":"me","name":"Montenegrin"},{"code":"ml","name":"Malayalam"},{"code":"my","name":"Burmese"},{"code":"nl","name":"Dutch"},{"code":"no","name":"Norvegian"},{"code":"pa","name":"Punjabi"},{"code":"pl","name":"Polish"},{"code":"pt","name":"Portuguese"},{"code":"ro","name":"Romanian"},{"code":"ru","name":"Russian"},{"code":"si","name":"Sinhala"},{"code":"sk","name":"Slovak"},{"code":"sl","name":"Slovenian"},{"code":"sq","name":"Albanian"},{"code":"sr","name":"Serbian"},{"code":"ta","name":"Tamil"},{"code":"te","name":"Telugu"},{"code":"test","name":"Test"},{"code":"th","name":"Thai"},{"code":"tk","name":"Turkmen"},{"code":"tr","name":"Turkish"},{"code":"uk","name":"Ukrainian"},{"code":"ur","name":"Urdu"},{"code":"uz","name":"Uzbek"},{"code":"v2","name":"v2"},{"code":"vi","name":"Vietnamese"},{"code":"zh-hant","name":"Chinese Traditional"},{"code":"zh","name":"Chinese"}];</script><script>window.lang = "en";</script><script>{let t=navigator.languages||[];t=t.map(t=>t.toLowerCase());let o,i,n=[];for(let o of window.langs)for(let i of t)if(i===o.code||i.startsWith(o.code+"-")){n.push(o);break}if("en"===lang)o='\n      We created a Discord chat channel :), <a href="https://discord.gg/DT2QwadzJR">click here to join</a>.\n    ',i="notify-discord";else if("ru"!=lang){n.find(t=>"en"==t.code)&&(o=`\n            According to your browser headers, you know English. Please help to <a href="https://github.com/javascript-tutorial/${lang}.javascript.info#readme">translate the tutorial</a>.\n            Thank you!\n          `,i="notify-translate-tutorial-local")}if(o){let t=`<div class="notification notification_top notification_info sitetoolbar__notification" style="display:none" id="${i}">\n          <div class="notification__content">${o}</div>\n          <button class="notification__close" title="Close"></button>\n        </div>`;document.write(t),showTopNotification()}}</script><div class="sitetoolbar__content"><div class="sitetoolbar__lang-switcher"><button class="sitetoolbar__dropdown-button" data-dropdown-toggler>EN</button><div class="sitetoolbar__dropdown-wrap"><div class="sitetoolbar__dropdown-body"><div class="sitetoolbar__lang-switcher-body"><div class="supported-langs supported-langs_toolbar"><div class="supported-langs__container"><ul class="supported-langs__list" style="height:200px"><li class="supported-langs__item"><a class="supported-langs__link" href="https://ar.javascript.info/"><span class="supported-langs__brief">AR</span><span class="supported-langs__title">عربي</span></a></li><li class="supported-langs__item supported-langs__item_current"><a class="supported-langs__link" href="https://javascript.info/fetch"><span class="supported-langs__brief">EN</span><span class="supported-langs__title">English</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://es.javascript.info/fetch"><span class="supported-langs__brief">ES</span><span class="supported-langs__title">Español</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://fr.javascript.info/fetch"><span class="supported-langs__brief">FR</span><span class="supported-langs__title">Français</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://id.javascript.info/fetch"><span class="supported-langs__brief">ID</span><span class="supported-langs__title">Indonesia</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://it.javascript.info/fetch"><span class="supported-langs__brief">IT</span><span class="supported-langs__title">Italiano</span></a></li></ul><ul class="supported-langs__list" style="height:164px"><li class="supported-langs__item"><a class="supported-langs__link" href="https://ja.javascript.info/fetch"><span class="supported-langs__brief">JA</span><span class="supported-langs__title">日本語</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://ko.javascript.info/fetch"><span class="supported-langs__brief">KO</span><span class="supported-langs__title">한국어</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://learn.javascript.ru/fetch"><span class="supported-langs__brief">RU</span><span class="supported-langs__title">Русский</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://tr.javascript.info/"><span class="supported-langs__brief">TR</span><span class="supported-langs__title">Türkçe</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://zh.javascript.info/fetch"><span class="supported-langs__brief">ZH</span><span class="supported-langs__title">简体中文</span></a></li></ul></div><div class="supported-langs__text"><p>We want to make this open-source project available for people all around the world.</p> <p><a href="https://javascript.info/translate">Help to translate</a> the content of this tutorial to your language!</p>
</div></div></div></div></div></div><div class="sitetoolbar__logo-wrap"><a class="sitetoolbar__link sitetoolbar__link_logo" href="/"><img class="sitetoolbar__logo sitetoolbar__logo_normal" src="/img/sitetoolbar__logo_en.svg" width="200" alt="" role="presentation"/><img class="sitetoolbar__logo sitetoolbar__logo_small" src="/img/sitetoolbar__logo_small_en.svg" width="70" alt="" role="presentation"/><script>Array.prototype.forEach.call(document.querySelectorAll("img.sitetoolbar__logo"),function(e){let t=document.createElement("object");t.type="image/svg+xml",t.className=e.className,t.style.cssText="left:0;top:0;position:absolute",t.onload=function(){t.onload=null,e.style.visibility="hidden"},t.data=e.src,e.parentNode.insertBefore(t,e)});</script></a></div><div class="sitetoolbar__nav-toggle-wrap"><button class="sitetoolbar__nav-toggle" type="button"></button></div><nav class="sitetoolbar__sections"><ul class="sitetoolbar__sections-list"></ul></nav><div class="sitetoolbar__book-wrap"><a class="buy-book-button" href="/ebook"><span class="buy-book-button__extra-text">Buy</span>EPUB/PDF</a></div><div class="sitetoolbar__login-wrap"><button class="sitetoolbar__login sitetoolbar__login_unready" data-action-login></button></div><div class="sitetoolbar__search-wrap"><div class="sitetoolbar__search-content"><form class="sitetoolbar__search" method="GET" action="/search"><button class="sitetoolbar__search-toggle" type="button"></button><div class="sitetoolbar__search-input"><div class="text-input"><input class="text-input__control" name="query" placeholder="Search on Javascript.info" required="required" type="text"/></div><button class="sitetoolbar__find" type="submit">Search</button></div></form></div></div></div><div class="tablet-menu"><div class="tablet-menu__line"><div class="tablet-menu__content"><form class="tablet-menu-search" action="/search/"><input class="tablet-menu-search__input" type="search" name="query" placeholder="Search in the tutorial" required="required"/><button class="tablet-menu-search__button" type="submit" name="type" value="articles">Search</button></form></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><a class="map" href="/tutorial/map" data-action="tutorial-map"><span class="map__text">Tutorial map</span></a></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><div class="share-icons"><span class="share-icons__title">Share</span><a class="share share_tw" href="https://twitter.com/share?url=https%3A%2F%2Fjavascript.info%2Ffetch" rel="nofollow"></a><a class="share share_fb" href="https://www.facebook.com/sharer/sharer.php?s=100&amp;p%5Burl%5D=https%3A%2F%2Fjavascript.info%2Ffetch" rel="nofollow"></a></div></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><select class="tablet-menu__nav input-select input-select input-select_small" onchange="if(this.value) window.location.href=this.value"><option value="https://ar.javascript.info/">عربي</option><option value="https://javascript.info/fetch" selected>English</option><option value="https://es.javascript.info/fetch">Español</option><option value="https://fr.javascript.info/fetch">Français</option><option value="https://id.javascript.info/fetch">Indonesia</option><option value="https://it.javascript.info/fetch">Italiano</option><option value="https://ja.javascript.info/fetch">日本語</option><option value="https://ko.javascript.info/fetch">한국어</option><option value="https://learn.javascript.ru/fetch">Русский</option><option value="https://tr.javascript.info/">Türkçe</option><option value="https://zh.javascript.info/fetch">简体中文</option></select></div></div></div><progress class="tutorial-progress" data-sticky value="1" max="12" data-tooltip="Lesson 1 of 12"></progress></div><div class="page page_sidebar_on page_inner_padding"><script>if(localStorage.noSidebar){document.querySelector(".page").classList.remove("page_sidebar_on");let e=document.querySelector(".page-wrapper");e&&e.classList.remove("page-wrapper_sidebar_on")}setTimeout(function(){document.querySelector(".page").classList.add("page_sidebar-animation-on")});</script><div class="page__inner"><main class="main main_width-limit"><header class="main__header"><div class="main__header-inner"><div class="main__header-group"><ol class="breadcrumbs"><li class="breadcrumbs__item breadcrumbs__item_home"><a class="breadcrumbs__link" href="/"><span class="breadcrumbs__hidden-text">Tutorial</span></a></li><li class="breadcrumbs__item" id="breadcrumb-1"><a class="breadcrumbs__link" href="/network"><span>Network requests</span></a></li><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Tutorial","item":"https://javascript.info/"},{"@type":"ListItem","position":2,"name":"Network requests","item":"https://javascript.info/network"}]}</script></ol><div class="updated-at" data-tooltip="Last updated at 5th December 2020"><div class="updated-at__content">5th December 2020</div></div></div><h1 class="main__header-title">Fetch</h1></div></header><div class="content"><article class="formatted" itemscope itemtype="http://schema.org/TechArticle"><meta itemprop="name" content="Fetch"><div itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="email" content="iliakan@gmail.com"><meta itemprop="name" content="Ilya Kantor"></div><div itemprop="articleBody"><p>JavaScript can send network requests to the server and load new information whenever it’s needed.</p>
<p>For example, we can use a network request to:</p>
<ul>
<li>Submit an order,</li>
<li>Load user information,</li>
<li>Receive latest updates from the server,</li>
<li>…etc.</li>
</ul>
<p>…And all of that without reloading the page!</p>
<p>There’s an umbrella term “AJAX” (abbreviated <b>A</b>synchronous <b>J</b>avaScript <b>A</b>nd <b>X</b>ML) for network requests from JavaScript. We don’t have to use XML though: the term comes from old times, that’s why that word is there. You may have heard that term already.</p>
<p>There are multiple ways to send a network request and get information from the server.</p>
<p>The <code>fetch()</code> method is modern and versatile, so we’ll start with it. It’s not supported by old browsers (can be polyfilled), but very well supported among the modern ones.</p>
<p>The basic syntax is:</p>
<div id="hh6adut5fv" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let promise = fetch(url, [options])</code></pre>
        </div>
      </div>
      
      </div><ul>
<li><strong><code>url</code></strong> – the URL to access.</li>
<li><strong><code>options</code></strong> – optional parameters: method, headers etc.</li>
</ul>
<p>Without <code>options</code>, this is a simple GET request, downloading the contents of the <code>url</code>.</p>
<p>The browser starts the request right away and returns a promise that the calling code should use to get the result.</p>
<p>Getting a response is usually a two-stage process.</p>
<p><strong>First, the <code>promise</code>, returned by <code>fetch</code>, resolves with an object of the built-in <a href="https://fetch.spec.whatwg.org/#response-class">Response</a> class as soon as the server responds with headers.</strong></p>
<p>At this stage we can check HTTP status, to see whether it is successful or not, check headers, but don’t have the body yet.</p>
<p>The promise rejects if the <code>fetch</code> was unable to make HTTP-request, e.g. network problems, or there’s no such site. Abnormal HTTP-statuses, such as 404 or 500 do not cause an error.</p>
<p>We can see HTTP-status in response properties:</p>
<ul>
<li><strong><code>status</code></strong> – HTTP status code, e.g. 200.</li>
<li><strong><code>ok</code></strong> – boolean, <code>true</code> if the HTTP status code is 200-299.</li>
</ul>
<p>For example:</p>
<div id="inkc5rl9dy" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let response = await fetch(url);

if (response.ok) { // if HTTP-status is 200-299
  // get the response body (the method explained below)
  let json = await response.json();
} else {
  alert(&quot;HTTP-Error: &quot; + response.status);
}</code></pre>
        </div>
      </div>
      
      </div><p><strong>Second, to get the response body, we need to use an additional method call.</strong></p>
<p><code>Response</code> provides multiple promise-based methods to access the body in various formats:</p>
<ul>
<li><strong><code>response.text()</code></strong> – read the response and return as text,</li>
<li><strong><code>response.json()</code></strong> – parse the response as JSON,</li>
<li><strong><code>response.formData()</code></strong> – return the response as <code>FormData</code> object (explained in the <a href="/formdata">next chapter</a>),</li>
<li><strong><code>response.blob()</code></strong> – return the response as <a href="/blob">Blob</a> (binary data with type),</li>
<li><strong><code>response.arrayBuffer()</code></strong> – return the response as <a href="/arraybuffer-binary-arrays">ArrayBuffer</a> (low-level representation of binary data),</li>
<li>additionally, <code>response.body</code> is a <a href="https://streams.spec.whatwg.org/#rs-class">ReadableStream</a> object, it allows you to read the body chunk-by-chunk, we’ll see an example later.</li>
</ul>
<p>For instance, let’s get a JSON-object with latest commits from GitHub:</p>
<div id="s2g4nem4iz" data-trusted="1" class="code-example" data-async="1" data-highlight="[{&quot;start&quot;:3,&quot;end&quot;:3}]">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="run" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="open in sandbox" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let url = 'https://api.github.com/repos/javascript-tutorial/en.javascript.info/commits';
let response = await fetch(url);

let commits = await response.json(); // read response body and parse as JSON

alert(commits[0].author.login);</code></pre>
        </div>
      </div>
      
      </div><p>Or, the same without <code>await</code>, using pure promises syntax:</p>
<div id="63ec6k8fym" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="run" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="open in sandbox" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>fetch('https://api.github.com/repos/javascript-tutorial/en.javascript.info/commits')
  .then(response =&gt; response.json())
  .then(commits =&gt; alert(commits[0].author.login));</code></pre>
        </div>
      </div>
      
      </div><p>To get the response text, <code>await response.text()</code> instead of <code>.json()</code>:</p>
<div id="rx9s9mlzu6" data-trusted="1" class="code-example" data-async="1">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="run" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="open in sandbox" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let response = await fetch('https://api.github.com/repos/javascript-tutorial/en.javascript.info/commits');

let text = await response.text(); // read response body as text

alert(text.slice(0, 80) + '...');</code></pre>
        </div>
      </div>
      
      </div><p>As a show-case for reading in binary format, let’s fetch and show a logo image of <a href="https://fetch.spec.whatwg.org">“fetch” specification</a> (see chapter <a href="/blob">Blob</a> for details about operations on <code>Blob</code>):</p>
<div id="o27bt5dfx7" data-trusted="1" class="code-example" data-async="1" data-highlight="[{&quot;start&quot;:2,&quot;end&quot;:2}]">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="run" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="open in sandbox" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let response = await fetch('/article/fetch/logo-fetch.svg');

let blob = await response.blob(); // download as Blob object

// create &lt;img&gt; for it
let img = document.createElement('img');
img.style = 'position:fixed;top:10px;left:10px;width:100px';
document.body.append(img);

// show it
img.src = URL.createObjectURL(blob);

setTimeout(() =&gt; { // hide after three seconds
  img.remove();
  URL.revokeObjectURL(img.src);
}, 3000);</code></pre>
        </div>
      </div>
      
      </div><div class="important important_warn">
            <div class="important__header"><span class="important__type">Important:</span></div>
            <div class="important__content"><p>We can choose only one body-reading method.</p>
<p>If we’ve already got the response with <code>response.text()</code>, then <code>response.json()</code> won’t work, as the body content has already been processed.</p>
<div id="595m5gfngk" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let text = await response.text(); // response body consumed
let parsed = await response.json(); // fails (already consumed)</code></pre>
        </div>
      </div>
      
      </div></div></div>
<h2><a class="main__anchor" name="response-headers" href="#response-headers">Response headers</a></h2><p>The response headers are available in a Map-like headers object in <code>response.headers</code>.</p>
<p>It’s not exactly a Map, but it has similar methods to get individual headers by name or iterate over them:</p>
<div id="hi72rk2a96" data-trusted="1" class="code-example" data-async="1">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="run" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="open in sandbox" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let response = await fetch('https://api.github.com/repos/javascript-tutorial/en.javascript.info/commits');

// get one header
alert(response.headers.get('Content-Type')); // application/json; charset=utf-8

// iterate over all headers
for (let [key, value] of response.headers) {
  alert(`${key} = ${value}`);
}</code></pre>
        </div>
      </div>
      
      </div><h2><a class="main__anchor" name="request-headers" href="#request-headers">Request headers</a></h2><p>To set a request header in <code>fetch</code>, we can use the <code>headers</code> option. It has an object with outgoing headers, like this:</p>
<div id="tkik53d1kb" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let response = fetch(protectedUrl, {
  headers: {
    Authentication: 'secret'
  }
});</code></pre>
        </div>
      </div>
      
      </div><p>…But there’s a list of <a href="https://fetch.spec.whatwg.org/#forbidden-header-name">forbidden HTTP headers</a> that we can’t set:</p>
<ul>
<li><code>Accept-Charset</code>, <code>Accept-Encoding</code></li>
<li><code>Access-Control-Request-Headers</code></li>
<li><code>Access-Control-Request-Method</code></li>
<li><code>Connection</code></li>
<li><code>Content-Length</code></li>
<li><code>Cookie</code>, <code>Cookie2</code></li>
<li><code>Date</code></li>
<li><code>DNT</code></li>
<li><code>Expect</code></li>
<li><code>Host</code></li>
<li><code>Keep-Alive</code></li>
<li><code>Origin</code></li>
<li><code>Referer</code></li>
<li><code>TE</code></li>
<li><code>Trailer</code></li>
<li><code>Transfer-Encoding</code></li>
<li><code>Upgrade</code></li>
<li><code>Via</code></li>
<li><code>Proxy-*</code></li>
<li><code>Sec-*</code></li>
</ul>
<p>These headers ensure proper and safe HTTP, so they are controlled exclusively by the browser.</p>
<h2><a class="main__anchor" name="post-requests" href="#post-requests">POST requests</a></h2><p>To make a <code>POST</code> request, or a request with another method, we need to use <code>fetch</code> options:</p>
<ul>
<li><strong><code>method</code></strong> – HTTP-method, e.g. <code>POST</code>,</li>
<li><strong><code>body</code></strong> – the request body, one of:
<ul>
<li>a string (e.g. JSON-encoded),</li>
<li><code>FormData</code> object, to submit the data as <code>form/multipart</code>,</li>
<li><code>Blob</code>/<code>BufferSource</code> to send binary data,</li>
<li><a href="/url">URLSearchParams</a>, to submit the data in <code>x-www-form-urlencoded</code> encoding, rarely used.</li>
</ul>
</li>
</ul>
<p>The JSON format is used most of the time.</p>
<p>For example, this code submits <code>user</code> object as JSON:</p>
<div id="bspwtmybqb" data-trusted="1" class="code-example" data-async="1" data-highlight="[{&quot;start&quot;:5,&quot;end&quot;:11}]">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="run" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="open in sandbox" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let user = {
  name: 'John',
  surname: 'Smith'
};

let response = await fetch('/article/fetch/post/user', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json;charset=utf-8'
  },
  body: JSON.stringify(user)
});

let result = await response.json();
alert(result.message);</code></pre>
        </div>
      </div>
      
      </div><p>Please note, if the request <code>body</code> is a string, then <code>Content-Type</code> header is set to <code>text/plain;charset=UTF-8</code> by default.</p>
<p>But, as we’re going to send JSON, we use <code>headers</code> option to send <code>application/json</code> instead, the correct <code>Content-Type</code> for JSON-encoded data.</p>
<h2><a class="main__anchor" name="sending-an-image" href="#sending-an-image">Sending an image</a></h2><p>We can also submit binary data with <code>fetch</code> using <code>Blob</code> or <code>BufferSource</code> objects.</p>
<p>In this example, there’s a <code>&lt;canvas&gt;</code> where we can draw by moving a mouse over it. A click on the “submit” button sends the image to the server:</p>
<div id="22xsg9qus6" data-trusted="1" class="code-example" data-demo-height="90" data-autorun="true">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="show" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="open in sandbox" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-markup"><code>&lt;body style=&quot;margin:0&quot;&gt;
  &lt;canvas id=&quot;canvasElem&quot; width=&quot;100&quot; height=&quot;80&quot; style=&quot;border:1px solid&quot;&gt;&lt;/canvas&gt;

  &lt;input type=&quot;button&quot; value=&quot;Submit&quot; onclick=&quot;submit()&quot;&gt;

  &lt;script&gt;
    canvasElem.onmousemove = function(e) {
      let ctx = canvasElem.getContext('2d');
      ctx.lineTo(e.clientX, e.clientY);
      ctx.stroke();
    };

    async function submit() {
      let blob = await new Promise(resolve =&gt; canvasElem.toBlob(resolve, 'image/png'));
      let response = await fetch('/article/fetch/post/image', {
        method: 'POST',
        body: blob
      });

      // the server responds with confirmation and the image size
      let result = await response.json();
      alert(result.message);
    }

  &lt;/script&gt;
&lt;/body&gt;</code></pre>
        </div>
      </div>
      <div class="code-result code-example__result">
          <iframe
            class="code-result__iframe"
            name="test-22xsg9qus6"
            style="height:90px"
            src="about:blank"></iframe>
        </div>
      </div><p>Please note, here we don’t set <code>Content-Type</code> header manually, because a <code>Blob</code> object has a built-in type (here <code>image/png</code>, as generated by <code>toBlob</code>). For <code>Blob</code> objects that type becomes the value of <code>Content-Type</code>.</p>
<p>The <code>submit()</code> function can be rewritten without <code>async/await</code> like this:</p>
<div id="dzb5jtzytl" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>function submit() {
  canvasElem.toBlob(function(blob) {
    fetch('/article/fetch/post/image', {
      method: 'POST',
      body: blob
    })
      .then(response =&gt; response.json())
      .then(result =&gt; alert(JSON.stringify(result, null, 2)))
  }, 'image/png');
}</code></pre>
        </div>
      </div>
      
      </div><h2><a class="main__anchor" name="summary" href="#summary">Summary</a></h2><p>A typical fetch request consists of two <code>await</code> calls:</p>
<div id="786sss6du7" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let response = await fetch(url, options); // resolves with response headers
let result = await response.json(); // read body as json</code></pre>
        </div>
      </div>
      
      </div><p>Or, without <code>await</code>:</p>
<div id="o8jof8lupg" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>fetch(url, options)
  .then(response =&gt; response.json())
  .then(result =&gt; /* process result */)</code></pre>
        </div>
      </div>
      
      </div><p>Response properties:</p>
<ul>
<li><code>response.status</code> – HTTP code of the response,</li>
<li><code>response.ok</code> – <code>true</code> is the status is 200-299.</li>
<li><code>response.headers</code> – Map-like object with HTTP headers.</li>
</ul>
<p>Methods to get response body:</p>
<ul>
<li><strong><code>response.text()</code></strong> – return the response as text,</li>
<li><strong><code>response.json()</code></strong> – parse the response as JSON object,</li>
<li><strong><code>response.formData()</code></strong> – return the response as <code>FormData</code> object (form/multipart encoding, see the next chapter),</li>
<li><strong><code>response.blob()</code></strong> – return the response as <a href="/blob">Blob</a> (binary data with type),</li>
<li><strong><code>response.arrayBuffer()</code></strong> – return the response as <a href="/arraybuffer-binary-arrays">ArrayBuffer</a> (low-level binary data),</li>
</ul>
<p>Fetch options so far:</p>
<ul>
<li><code>method</code> – HTTP-method,</li>
<li><code>headers</code> – an object with request headers (not any header is allowed),</li>
<li><code>body</code> – the data to send (request body) as <code>string</code>, <code>FormData</code>, <code>BufferSource</code>, <code>Blob</code> or <code>UrlSearchParams</code> object.</li>
</ul>
<p>In the next chapters we’ll see more options and use cases of <code>fetch</code>.</p>
</div></article><div class="tasks formatted"><h2 class="tasks__title" id="tasks"><a class="tasks__title-anchor main__anchor main__anchor main__anchor_noicon" href="#tasks">Tasks</a></h2><div class="task tasks__task"><div class="task__header"><div class="task__title-wrap"><h3 class="task__title"><a class="main__anchor" href="#fetch-users-from-github" name="fetch-users-from-github">Fetch users from GitHub</a></h3><a class="task__open-link" href="/task/fetch-users" target="_blank"></a></div><div class="task__header-note"></div><div class="task__content"><div class="task__formatted"><p>Create an async function <code>getUsers(names)</code>, that gets an array of GitHub logins, fetches the users from GitHub and returns an array of GitHub users.</p>
<p>The GitHub url with user information for the given <code>USERNAME</code> is: <code>https://api.github.com/users/USERNAME</code>.</p>
<p>There’s a test example in the sandbox.</p>
<p>Important details:</p>
<ol>
<li>There should be one <code>fetch</code> request per user.</li>
<li>Requests shouldn’t wait for each other. So that the data arrives as soon as possible.</li>
<li>If any request fails, or if there’s no such user, the function should return <code>null</code> in the resulting array.</li>
</ol>
<p><a href="https://plnkr.co/edit/joLEhbz23gKnOfNb?p=preview" target="_blank" data-plunk-id="joLEhbz23gKnOfNb">Open a sandbox with tests.</a></p></div><button class="task__solution" type="button">solution</button><div class="task__answer"><div class="task__answer-content"><div class="formatted"><p>To fetch a user we need: <code>fetch('https://api.github.com/users/USERNAME')</code>.</p>
<p>If the response has status <code>200</code>, call <code>.json()</code> to read the JS object.</p>
<p>Otherwise, if a <code>fetch</code> fails, or the response has non-200 status, we just return <code>null</code> in the resulting array.</p>
<p>So here’s the code:</p>
<div id="c5rn1z3epy" data-trusted="1" class="code-example" data-demo="1">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>async function getUsers(names) {
  let jobs = [];

  for(let name of names) {
    let job = fetch(`https://api.github.com/users/${name}`).then(
      successResponse =&gt; {
        if (successResponse.status != 200) {
          return null;
        } else {
          return successResponse.json();
        }
      },
      failResponse =&gt; {
        return null;
      }
    );
    jobs.push(job);
  }

  let results = await Promise.all(jobs);

  return results;
}</code></pre>
        </div>
      </div>
      
      </div><p>Please note: <code>.then</code> call is attached directly to <code>fetch</code>, so that when we have the response, it doesn’t wait for other fetches, but starts to read <code>.json()</code> immediately.</p>
<p>If we used <code>await Promise.all(names.map(name =&gt; fetch(...)))</code>, and call <code>.json()</code> on the results, then it would wait for all fetches to respond. By adding <code>.json()</code> directly to each <code>fetch</code>, we ensure that individual fetches start reading data as JSON without waiting for each other.</p>
<p>That’s an example of how low-level Promise API can still be useful even if we mainly use <code>async/await</code>.</p>
<p><a href="https://plnkr.co/edit/iecdfMfnlmOOspS6?p=preview" target="_blank" data-plunk-id="iecdfMfnlmOOspS6">Open the solution with tests in a sandbox.</a></p></div></div><button class="close-button task__answer-close" type="button" title="close"></button></div></div></div></div></div></div><div class="page__nav-wrap"><a class="page__nav page__nav_prev" href="/network" data-tooltip="Network requests"><span class="page__nav-text"><span class="page__nav-text-shortcut"></span></span><span class="page__nav-text-alternate">Previous lesson</span></a><a class="page__nav page__nav_next" href="/formdata" data-tooltip="FormData"><span class="page__nav-text"><span class="page__nav-text-shortcut"></span></span><span class="page__nav-text-alternate">Next lesson</span></a></div><div class="article-tablet-foot tablet-only"><div class="article-tablet-foot__layout"><div class="share-icons"><span class="share-icons__title">Share</span><a class="share share_tw" href="https://twitter.com/share?url=https%3A%2F%2Fjavascript.info%2Ffetch" rel="nofollow"></a><a class="share share_fb" href="https://www.facebook.com/sharer/sharer.php?s=100&amp;p%5Burl%5D=https%3A%2F%2Fjavascript.info%2Ffetch" rel="nofollow"></a></div><div class="article-tablet-foot__map"><a class="map" href="/tutorial/map" data-action="tutorial-map"><span class="map__text">Tutorial map</span></a></div></div></div><div class="comments formatted" id="comments"><div class="comments__header"><h2 class="comments__header-title"><a href="#comments" name="comments">Comments</a></h2><div class="comments__read-before"><span class="comments__read-before-link">read this before commenting…</span><div class="comments__read-before-popup"><div class="comments__read-before-popup-i"><ul><li>If you have suggestions what to improve - please <a href="https://github.com/javascript-tutorial/en.javascript.info/issues/new">submit a GitHub issue</a> or a pull request instead of commenting.</li><li>If you can't understand something in the article – please elaborate.</li><li>To insert few words of code, use the <code>&lt;code&gt;</code> tag, for several lines – wrap them in <code>&lt;pre&gt;</code> tag, for more than 10 lines – use a sandbox (<a href='https://plnkr.co/edit/?p=preview'>plnkr</a>, <a href='https://jsbin.com'>jsbin</a>, <a href='http://codepen.io'>codepen</a>…)</li></ul></div></div></div></div><div id="disqus_thread"></div><script>var disqus_config = function() { if (!this.page) this.page = {}; Object.assign(this.page, {"url":"https:\/\/javascript.info\/fetch","identifier":"\/fetch"}); };</script><script>var disqus_shortname = "javascriptinfo";</script><script>var disqus_enabled = true;</script></div></main></div><div class="sidebar page__sidebar sidebar sidebar_sticky-footer"><button class="sidebar__toggle" data-sidebar-toggle></button><a class="map" href="/tutorial/map" data-action="tutorial-map" data-tooltip="Tutorial map"></a><div class="sidebar__inner"><div class="sidebar__content"><div class="sidebar__section"><h4 class="sidebar__section-title">Chapter</h4><nav class="sidebar__navigation"><ul class="sidebar__navigation-links"><li class="sidebar__navigation-link"><a class="sidebar__link" href="/network">Network requests</a></li></ul></nav></div><div class="sidebar__section"><h4 class="sidebar__section-title">Lesson navigation</h4><nav class="sidebar__navigation"><ul class="sidebar__navigation-links"><li class="sidebar__navigation-link"><a class="sidebar__link" href="#response-headers">Response headers</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#request-headers">Request headers</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#post-requests">POST requests</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#sending-an-image">Sending an image</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#summary">Summary</a></li></ul></nav></div><div class="sidebar__section"><nav class="sidebar__navigation"><ul class="sidebar__navigation-links"><li class="sidebar__navigation-link"><a class="sidebar__link" href="#tasks">Tasks (1)</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#comments">Comments</a></li></ul></nav></div><div class="sidebar__section"><div class="sidebar__section-title">Share</div><a class="share share_tw sidebar__share" href="https://twitter.com/share?url=https%3A%2F%2Fjavascript.info%2Ffetch" rel="nofollow"></a><a class="share share_fb sidebar__share" href="https://www.facebook.com/sharer/sharer.php?s=100&amp;p[url]=https%3A%2F%2Fjavascript.info%2Ffetch" rel="nofollow"></a></div><div class="sidebar__section"><a class="sidebar__link" href="https://github.com/javascript-tutorial/en.javascript.info/blob/master/5-network/01-fetch" rel="nofollow">Edit on GitHub</a></div><div class="sidebar__section" id="sponsorBar"><div class="sidebar__section-title" id="sponsorBarTitle"></div><div id="sponsorBarContent"></div><script>window.initSponsorBar()</script></div></div></div></div></div></div><div class="page-footer"><ul class="page-footer__list"><li class="page-footer__item page-footer__item_copy">©&nbsp;2007—2021&nbsp; Ilya Kantor</li><li class="page-footer__item page-footer__item_about"><a class="page-footer__link" href="/about">about the project</a></li><li class="page-footer__item page-footer__item_contact"><a class="page-footer__link" href="/about#contact-us">contact us</a></li><li class="page-footer__item page-footer__item_terms"><a class="page-footer__link" href="/terms">terms of usage</a></li><li class="page-footer__item page-footer__item_privacy"><a class="page-footer__link" href="/privacy">privacy policy</a></li></ul></div></body></html>