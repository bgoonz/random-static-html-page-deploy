<!DOCTYPE html>
<html lang="en">
  <head>
    <script>
      window.currentUser = null;
    </script>
    <script>
      window.rateUsdToNative = 1;
    </script>
    <title itemprop="name">Cookies, document.cookie</title>
    <link href="/pack/styles.d6e712fda8b9d95f7338.css" rel="stylesheet" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, user-scalable=yes, minimum-scale=1.0"
    />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <script>
      if (window.devicePixelRatio > 1)
        document.cookie =
          "pixelRatio=" +
          window.devicePixelRatio +
          ";path=/;expires=Tue, 19 Jan 2038 03:14:07 GMT";
    </script>
    <link
      href="//fonts.googleapis.com/css?family=Open+Sans:bold,italic,bolditalic"
      rel="stylesheet"
    />
    <link
      rel="apple-touch-icon-precomposed"
      href="/img/favicon/apple-touch-icon-precomposed.png"
    />
    <link rel="canonical" href="https://javascript.info/cookie" />
    <meta name="msapplication-TileColor" content="#222A2C" />
    <meta name="msapplication-TileImage" content="/img/favicon/tileicon.png" />
    <link rel="icon" href="/img/favicon/favicon.png" />
    <meta
      itemprop="image"
      content="https://javascript.info/img/site_preview_en_512x512.png"
    />
    <meta property="og:title" content="Cookies, document.cookie" />
    <meta
      property="og:image"
      content="https://javascript.info/img/site_preview_en_1200x630.png"
    />
    <meta property="og:image:type" content="image/png" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="fb:admins" content="100001562528165" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Cookies, document.cookie" />
    <meta name="twitter:site" content="@iliakan" />
    <meta name="twitter:creator" content="@iliakan" />
    <meta
      name="twitter:image"
      content="https://javascript.info/img/site_preview_en_512x512.png"
    />
    <link rel="prev" href="/data-storage" />
    <link rel="next" href="/localstorage" />
    <script>
      window.GA_ID = "UA-2056213-15";
    </script>
    <script>
      window.YANDEX_METRIKA_ID = 32184394;
    </script>
    <script>
      (window.GoogleAnalyticsObject = "ga"),
        (window.ga = function () {
          window.ga.q.push(arguments);
        }),
        (window.ga.q = []),
        (window.ga.l = Date.now()),
        ga("create", GA_ID, "auto"),
        window.GTM_ID && ga("require", GTM_ID),
        window.currentUser
          ? ga("set", "&uid", currentUser.id)
          : ga("set", "anonymizeIp", !0),
        window.addEventListener("error", function (e) {
          var r = (e.filename || e.errorUrl) + ": " + (e.lineno || e.errorLine),
            n = e.stack || (e.error && e.error.stack);
          ga("send", "exception", {
            exDescription: e.message + " " + r + " " + n,
            exFatal: !0,
          });
        });
    </script>
    <script src="https://www.google-analytics.com/analytics.js" async></script>
    <script>
      ga("send", "pageview");
    </script>
    <script>
      (window.metrika = { reachGoal: function () {} }),
        (window.yandex_metrika_callbacks = [
          function () {
            try {
              (window.metrika = new Ya.Metrika({
                id: YANDEX_METRIKA_ID,
                webvisor: !0,
                clickmap: !0,
                params: { user: window.currentUser && window.currentUser.id },
              })),
                metrika.trackLinks({ delay: 150 }),
                window.addEventListener("error", function (r) {
                  window.metrika.reachGoal("JSERROR", {
                    src:
                      (r.filename || r.errorUrl) +
                      ": " +
                      (r.lineno || r.errorLine),
                    stack: r.stack || (r.error && r.error.stack),
                    message: r.message,
                  });
                });
            } catch (r) {}
          },
        ]);
    </script>
    <script src="//mc.yandex.ru/metrika/watch.js" async></script>
    <script>
      window.RECAPTCHA_ID = "6LfmLAEVAAAAAJMykMnf7aY8nkyTRmYi2ynx51R1";
    </script>
    <script src="/pack/init.51e39bc929812b94c4a8.js"></script>
    <script src="/pack/head.7a1dfd85e1f5c29a4840.js" defer></script>
    <meta property="og:title" content="Cookies, document.cookie" />
    <meta property="og:type" content="article" />
    <script src="/pack/tutorial.a2cb726ed10a7d440094.js" defer></script>
    <script src="/pack/footer.2786f555ff370bdde300.js" defer></script>
  </head>
  <body class="no-icons">
    <script>
      window.fontTest();
    </script>
    <div class="page-wrapper page-wrapper_sidebar_on">
      <!--[if IE
        ]><div style="color: red; text-align: center">
          Sorry, Internet Explorer is not supported, please use a newer browser.
        </div><!
      [endif]-->
      <div class="sitetoolbar sitetoolbar_tutorial">
        <script>
          window.langs = [
            { code: "ar", name: "Arabic" },
            { code: "az", name: "Azerbaijani" },
            { code: "bg", name: "Bulgarian" },
            { code: "bn", name: "Bengali" },
            { code: "ca", name: "Catalan" },
            { code: "cs", name: "Czech" },
            { code: "da", name: "Danish" },
            { code: "de", name: "German" },
            { code: "el", name: "Greek" },
            { code: "en", name: "English" },
            { code: "es", name: "Spanish" },
            { code: "fa", name: "Persian (Farsi)" },
            { code: "fi", name: "Finnish" },
            { code: "fr", name: "French" },
            { code: "he", name: "Hebrew" },
            { code: "hi", name: "Hindi" },
            { code: "hr", name: "Croatian" },
            { code: "hu", name: "Hungarian" },
            { code: "hy", name: "Armenian" },
            { code: "id", name: "Indonesian" },
            { code: "it", name: "Italian" },
            { code: "ja", name: "Japanese" },
            { code: "ka", name: "Georgian" },
            { code: "kk", name: "Kazakh" },
            { code: "km", name: "Central Khmer" },
            { code: "ko", name: "Korean" },
            { code: "lt", name: "Lithuanian" },
            { code: "me", name: "Montenegrin" },
            { code: "ml", name: "Malayalam" },
            { code: "my", name: "Burmese" },
            { code: "nl", name: "Dutch" },
            { code: "no", name: "Norvegian" },
            { code: "pa", name: "Punjabi" },
            { code: "pl", name: "Polish" },
            { code: "pt", name: "Portuguese" },
            { code: "ro", name: "Romanian" },
            { code: "ru", name: "Russian" },
            { code: "si", name: "Sinhala" },
            { code: "sk", name: "Slovak" },
            { code: "sl", name: "Slovenian" },
            { code: "sq", name: "Albanian" },
            { code: "sr", name: "Serbian" },
            { code: "ta", name: "Tamil" },
            { code: "te", name: "Telugu" },
            { code: "test", name: "Test" },
            { code: "th", name: "Thai" },
            { code: "tk", name: "Turkmen" },
            { code: "tr", name: "Turkish" },
            { code: "uk", name: "Ukrainian" },
            { code: "ur", name: "Urdu" },
            { code: "uz", name: "Uzbek" },
            { code: "v2", name: "v2" },
            { code: "vi", name: "Vietnamese" },
            { code: "zh-hant", name: "Chinese Traditional" },
            { code: "zh", name: "Chinese" },
          ];
        </script>
        <script>
          window.lang = "en";
        </script>
        <script>
          {
            let t = navigator.languages || [];
            t = t.map((t) => t.toLowerCase());
            let o,
              i,
              n = [];
            for (let o of window.langs)
              for (let i of t)
                if (i === o.code || i.startsWith(o.code + "-")) {
                  n.push(o);
                  break;
                }
            if ("en" === lang)
              (o =
                '\n      We created a Discord chat channel :), <a href="https://discord.gg/DT2QwadzJR">click here to join</a>.\n    '),
                (i = "notify-discord");
            else if ("ru" != lang) {
              n.find((t) => "en" == t.code) &&
                ((o = `\n            According to your browser headers, you know English. Please help to <a href="https://github.com/javascript-tutorial/${lang}.javascript.info#readme">translate the tutorial</a>.\n            Thank you!\n          `),
                (i = "notify-translate-tutorial-local"));
            }
            if (o) {
              let t = `<div class="notification notification_top notification_info sitetoolbar__notification" style="display:none" id="${i}">\n          <div class="notification__content">${o}</div>\n          <button class="notification__close" title="Close"></button>\n        </div>`;
              document.write(t), showTopNotification();
            }
          }
        </script>
        <div class="sitetoolbar__content">
          <div class="sitetoolbar__lang-switcher">
            <button class="sitetoolbar__dropdown-button" data-dropdown-toggler>
              EN
            </button>
            <div class="sitetoolbar__dropdown-wrap">
              <div class="sitetoolbar__dropdown-body">
                <div class="sitetoolbar__lang-switcher-body">
                  <div class="supported-langs supported-langs_toolbar">
                    <div class="supported-langs__container">
                      <ul class="supported-langs__list" style="height: 200px">
                        <li class="supported-langs__item">
                          <a
                            class="supported-langs__link"
                            href="https://ar.javascript.info/"
                            ><span class="supported-langs__brief">AR</span
                            ><span class="supported-langs__title">عربي</span></a
                          >
                        </li>
                        <li
                          class="supported-langs__item supported-langs__item_current"
                        >
                          <a
                            class="supported-langs__link"
                            href="https://javascript.info/cookie"
                            ><span class="supported-langs__brief">EN</span
                            ><span class="supported-langs__title"
                              >English</span
                            ></a
                          >
                        </li>
                        <li class="supported-langs__item">
                          <a
                            class="supported-langs__link"
                            href="https://es.javascript.info/cookie"
                            ><span class="supported-langs__brief">ES</span
                            ><span class="supported-langs__title"
                              >Español</span
                            ></a
                          >
                        </li>
                        <li class="supported-langs__item">
                          <a
                            class="supported-langs__link"
                            href="https://fr.javascript.info/"
                            ><span class="supported-langs__brief">FR</span
                            ><span class="supported-langs__title"
                              >Français</span
                            ></a
                          >
                        </li>
                        <li class="supported-langs__item">
                          <a
                            class="supported-langs__link"
                            href="https://id.javascript.info/"
                            ><span class="supported-langs__brief">ID</span
                            ><span class="supported-langs__title"
                              >Indonesia</span
                            ></a
                          >
                        </li>
                        <li class="supported-langs__item">
                          <a
                            class="supported-langs__link"
                            href="https://it.javascript.info/cookie"
                            ><span class="supported-langs__brief">IT</span
                            ><span class="supported-langs__title"
                              >Italiano</span
                            ></a
                          >
                        </li>
                      </ul>
                      <ul class="supported-langs__list" style="height: 164px">
                        <li class="supported-langs__item">
                          <a
                            class="supported-langs__link"
                            href="https://ja.javascript.info/cookie"
                            ><span class="supported-langs__brief">JA</span
                            ><span class="supported-langs__title"
                              >日本語</span
                            ></a
                          >
                        </li>
                        <li class="supported-langs__item">
                          <a
                            class="supported-langs__link"
                            href="https://ko.javascript.info/cookie"
                            ><span class="supported-langs__brief">KO</span
                            ><span class="supported-langs__title"
                              >한국어</span
                            ></a
                          >
                        </li>
                        <li class="supported-langs__item">
                          <a
                            class="supported-langs__link"
                            href="https://learn.javascript.ru/cookie"
                            ><span class="supported-langs__brief">RU</span
                            ><span class="supported-langs__title"
                              >Русский</span
                            ></a
                          >
                        </li>
                        <li class="supported-langs__item">
                          <a
                            class="supported-langs__link"
                            href="https://tr.javascript.info/cookie"
                            ><span class="supported-langs__brief">TR</span
                            ><span class="supported-langs__title"
                              >Türkçe</span
                            ></a
                          >
                        </li>
                        <li class="supported-langs__item">
                          <a
                            class="supported-langs__link"
                            href="https://zh.javascript.info/cookie"
                            ><span class="supported-langs__brief">ZH</span
                            ><span class="supported-langs__title"
                              >简体中文</span
                            ></a
                          >
                        </li>
                      </ul>
                    </div>
                    <div class="supported-langs__text">
                      <p>
                        We want to make this open-source project available for
                        people all around the world.
                      </p>
                      <p>
                        <a href="https://javascript.info/translate"
                          >Help to translate</a
                        >
                        the content of this tutorial to your language!
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="sitetoolbar__logo-wrap">
            <a class="sitetoolbar__link sitetoolbar__link_logo" href="/"
              ><img
                class="sitetoolbar__logo sitetoolbar__logo_normal"
                src="/img/sitetoolbar__logo_en.svg"
                width="200"
                alt=""
                role="presentation"
              /><img
                class="sitetoolbar__logo sitetoolbar__logo_small"
                src="/img/sitetoolbar__logo_small_en.svg"
                width="70"
                alt=""
                role="presentation"
              />
              <script>
                Array.prototype.forEach.call(
                  document.querySelectorAll("img.sitetoolbar__logo"),
                  function (e) {
                    let t = document.createElement("object");
                    (t.type = "image/svg+xml"),
                      (t.className = e.className),
                      (t.style.cssText = "left:0;top:0;position:absolute"),
                      (t.onload = function () {
                        (t.onload = null), (e.style.visibility = "hidden");
                      }),
                      (t.data = e.src),
                      e.parentNode.insertBefore(t, e);
                  }
                );
              </script></a
            >
          </div>
          <div class="sitetoolbar__nav-toggle-wrap">
            <button class="sitetoolbar__nav-toggle" type="button"></button>
          </div>
          <nav class="sitetoolbar__sections">
            <ul class="sitetoolbar__sections-list"></ul>
          </nav>
          <div class="sitetoolbar__book-wrap">
            <a class="buy-book-button" href="/ebook"
              ><span class="buy-book-button__extra-text">Buy</span>EPUB/PDF</a
            >
          </div>
          <div class="sitetoolbar__login-wrap">
            <button
              class="sitetoolbar__login sitetoolbar__login_unready"
              data-action-login
            ></button>
          </div>
          <div class="sitetoolbar__search-wrap">
            <div class="sitetoolbar__search-content">
              <form class="sitetoolbar__search" method="GET" action="/search">
                <button
                  class="sitetoolbar__search-toggle"
                  type="button"
                ></button>
                <div class="sitetoolbar__search-input">
                  <div class="text-input">
                    <input
                      class="text-input__control"
                      name="query"
                      placeholder="Search on Javascript.info"
                      required="required"
                      type="text"
                    />
                  </div>
                  <button class="sitetoolbar__find" type="submit">
                    Search
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
        <div class="tablet-menu">
          <div class="tablet-menu__line">
            <div class="tablet-menu__content">
              <form class="tablet-menu-search" action="/search/">
                <input
                  class="tablet-menu-search__input"
                  type="search"
                  name="query"
                  placeholder="Search in the tutorial"
                  required="required"
                /><button
                  class="tablet-menu-search__button"
                  type="submit"
                  name="type"
                  value="articles"
                >
                  Search
                </button>
              </form>
            </div>
          </div>
          <div class="tablet-menu__line">
            <div class="tablet-menu__content">
              <a class="map" href="/tutorial/map" data-action="tutorial-map"
                ><span class="map__text">Tutorial map</span></a
              >
            </div>
          </div>
          <div class="tablet-menu__line">
            <div class="tablet-menu__content">
              <div class="share-icons">
                <span class="share-icons__title">Share</span
                ><a
                  class="share share_tw"
                  href="https://twitter.com/share?url=https%3A%2F%2Fjavascript.info%2Fcookie"
                  rel="nofollow"
                ></a
                ><a
                  class="share share_fb"
                  href="https://www.facebook.com/sharer/sharer.php?s=100&amp;p%5Burl%5D=https%3A%2F%2Fjavascript.info%2Fcookie"
                  rel="nofollow"
                ></a>
              </div>
            </div>
          </div>
          <div class="tablet-menu__line">
            <div class="tablet-menu__content">
              <select
                class="tablet-menu__nav input-select input-select input-select_small"
                onchange="if(this.value) window.location.href=this.value"
              >
                <option value="https://ar.javascript.info/">عربي</option>
                <option value="https://javascript.info/cookie" selected>
                  English
                </option>
                <option value="https://es.javascript.info/cookie">
                  Español
                </option>
                <option value="https://fr.javascript.info/">Français</option>
                <option value="https://id.javascript.info/">Indonesia</option>
                <option value="https://it.javascript.info/cookie">
                  Italiano
                </option>
                <option value="https://ja.javascript.info/cookie">
                  日本語
                </option>
                <option value="https://ko.javascript.info/cookie">
                  한국어
                </option>
                <option value="https://learn.javascript.ru/cookie">
                  Русский
                </option>
                <option value="https://tr.javascript.info/cookie">
                  Türkçe
                </option>
                <option value="https://zh.javascript.info/cookie">
                  简体中文
                </option>
              </select>
            </div>
          </div>
        </div>
        <progress
          class="tutorial-progress"
          data-sticky
          value="1"
          max="3"
          data-tooltip="Lesson 1 of 3"
        ></progress>
      </div>
      <div class="page page_sidebar_on page_inner_padding">
        <script>
          if (localStorage.noSidebar) {
            document.querySelector(".page").classList.remove("page_sidebar_on");
            let e = document.querySelector(".page-wrapper");
            e && e.classList.remove("page-wrapper_sidebar_on");
          }
          setTimeout(function () {
            document
              .querySelector(".page")
              .classList.add("page_sidebar-animation-on");
          });
        </script>
        <div class="page__inner">
          <main class="main main_width-limit">
            <header class="main__header">
              <div class="main__header-inner">
                <div class="main__header-group">
                  <ol class="breadcrumbs">
                    <li class="breadcrumbs__item breadcrumbs__item_home">
                      <a class="breadcrumbs__link" href="/"
                        ><span class="breadcrumbs__hidden-text"
                          >Tutorial</span
                        ></a
                      >
                    </li>
                    <li class="breadcrumbs__item" id="breadcrumb-1">
                      <a class="breadcrumbs__link" href="/data-storage"
                        ><span>Storing data in the browser</span></a
                      >
                    </li>
                    <script type="application/ld+json">
                      {
                        "@context": "https://schema.org",
                        "@type": "BreadcrumbList",
                        "itemListElement": [
                          {
                            "@type": "ListItem",
                            "position": 1,
                            "name": "Tutorial",
                            "item": "https://javascript.info/"
                          },
                          {
                            "@type": "ListItem",
                            "position": 2,
                            "name": "Storing data in the browser",
                            "item": "https://javascript.info/data-storage"
                          }
                        ]
                      }
                    </script>
                  </ol>
                  <div
                    class="updated-at"
                    data-tooltip="Last updated at 18th June 2021"
                  >
                    <div class="updated-at__content">18th June 2021</div>
                  </div>
                </div>
                <h1 class="main__header-title">Cookies, document.cookie</h1>
              </div>
            </header>
            <div class="content">
              <article
                class="formatted"
                itemscope
                itemtype="http://schema.org/TechArticle"
              >
                <meta itemprop="name" content="Cookies, document.cookie" />
                <div
                  itemprop="author"
                  itemscope
                  itemtype="http://schema.org/Person"
                >
                  <meta itemprop="email" content="iliakan@gmail.com" /><meta
                    itemprop="name"
                    content="Ilya Kantor"
                  />
                </div>
                <div itemprop="articleBody">
                  <p>
                    Cookies are small strings of data that are stored directly
                    in the browser. They are a part of the HTTP protocol,
                    defined by the
                    <a href="https://tools.ietf.org/html/rfc6265">RFC 6265</a>
                    specification.
                  </p>
                  <p>
                    Cookies are usually set by a web-server using the response
                    <code>Set-Cookie</code> HTTP-header. Then, the browser
                    automatically adds them to (almost) every request to the
                    same domain using the <code>Cookie</code> HTTP-header.
                  </p>
                  <p>One of the most widespread use cases is authentication:</p>
                  <ol>
                    <li>
                      Upon sign in, the server uses the
                      <code>Set-Cookie</code> HTTP-header in the response to set
                      a cookie with a unique “session identifier”.
                    </li>
                    <li>
                      Next time when the request is sent to the same domain, the
                      browser sends the cookie over the net using the
                      <code>Cookie</code> HTTP-header.
                    </li>
                    <li>So the server knows who made the request.</li>
                  </ol>
                  <p>
                    We can also access cookies from the browser, using
                    <code>document.cookie</code> property.
                  </p>
                  <p>
                    There are many tricky things about cookies and their
                    options. In this chapter we’ll cover them in detail.
                  </p>
                  <h2>
                    <a
                      class="main__anchor"
                      name="reading-from-document-cookie"
                      href="#reading-from-document-cookie"
                      >Reading from document.cookie</a
                    >
                  </h2>
                  <p>
                    Does your browser store any cookies from this site? Let’s
                    see:
                  </p>
                  <div id="x6phf5jh0f" data-trusted="1" class="code-example">
                    <div class="codebox code-example__codebox">
                      <div class="toolbar codebox__toolbar">
                        <div class="toolbar__tool">
                          <a
                            href="#"
                            title="run"
                            data-action="run"
                            class="toolbar__button toolbar__button_run"
                          ></a>
                        </div>
                        <div class="toolbar__tool">
                          <a
                            href="#"
                            title="open in sandbox"
                            target="_blank"
                            data-action="edit"
                            class="toolbar__button toolbar__button_edit"
                          ></a>
                        </div>
                      </div>
                      <div class="codebox__code" data-code="1">
                        <pre
                          class="line-numbers language-javascript"
                        ><code>// At javascript.info, we use Google Analytics for statistics,
// so there should be some cookies
alert( document.cookie ); // cookie1=value1; cookie2=value2;...</code></pre>
                      </div>
                    </div>
                  </div>
                  <p>
                    The value of <code>document.cookie</code> consists of
                    <code>name=value</code> pairs, delimited by <code>;</code>.
                    Each one is a separate cookie.
                  </p>
                  <p>
                    To find a particular cookie, we can split
                    <code>document.cookie</code> by <code>;</code>, and then
                    find the right name. We can use either a regular expression
                    or array functions to do that.
                  </p>
                  <p>
                    We leave it as an exercise for the reader. Also, at the end
                    of the chapter you’ll find helper functions to manipulate
                    cookies.
                  </p>
                  <h2>
                    <a
                      class="main__anchor"
                      name="writing-to-document-cookie"
                      href="#writing-to-document-cookie"
                      >Writing to document.cookie</a
                    >
                  </h2>
                  <p>
                    We can write to <code>document.cookie</code>. But it’s not a
                    data property, it’s an
                    <a href="/property-accessors">accessor (getter/setter)</a>.
                    An assignment to it is treated specially.
                  </p>
                  <p>
                    <strong
                      >A write operation to <code>document.cookie</code> updates
                      only cookies mentioned in it, but doesn’t touch other
                      cookies.</strong
                    >
                  </p>
                  <p>
                    For instance, this call sets a cookie with the name
                    <code>user</code> and value <code>John</code>:
                  </p>
                  <div id="dz2n5ny63p" data-trusted="1" class="code-example">
                    <div class="codebox code-example__codebox">
                      <div class="toolbar codebox__toolbar">
                        <div class="toolbar__tool">
                          <a
                            href="#"
                            title="run"
                            data-action="run"
                            class="toolbar__button toolbar__button_run"
                          ></a>
                        </div>
                        <div class="toolbar__tool">
                          <a
                            href="#"
                            title="open in sandbox"
                            target="_blank"
                            data-action="edit"
                            class="toolbar__button toolbar__button_edit"
                          ></a>
                        </div>
                      </div>
                      <div class="codebox__code" data-code="1">
                        <pre
                          class="line-numbers language-javascript"
                        ><code>document.cookie = &quot;user=John&quot;; // update only cookie named 'user'
alert(document.cookie); // show all cookies</code></pre>
                      </div>
                    </div>
                  </div>
                  <p>
                    If you run it, then probably you’ll see multiple cookies.
                    That’s because the <code>document.cookie=</code> operation
                    does not overwrite all cookies. It only sets the mentioned
                    cookie <code>user</code>.
                  </p>
                  <p>
                    Technically, name and value can have any characters. To keep
                    the valid formatting, they should be escaped using a
                    built-in <code>encodeURIComponent</code> function:
                  </p>
                  <div id="drzz75i3e5" data-trusted="1" class="code-example">
                    <div class="codebox code-example__codebox">
                      <div class="toolbar codebox__toolbar">
                        <div class="toolbar__tool">
                          <a
                            href="#"
                            title="run"
                            data-action="run"
                            class="toolbar__button toolbar__button_run"
                          ></a>
                        </div>
                        <div class="toolbar__tool">
                          <a
                            href="#"
                            title="open in sandbox"
                            target="_blank"
                            data-action="edit"
                            class="toolbar__button toolbar__button_edit"
                          ></a>
                        </div>
                      </div>
                      <div class="codebox__code" data-code="1">
                        <pre
                          class="line-numbers language-javascript"
                        ><code>// special characters (spaces), need encoding
let name = &quot;my name&quot;;
let value = &quot;John Smith&quot;

// encodes the cookie as my%20name=John%20Smith
document.cookie = encodeURIComponent(name) + '=' + encodeURIComponent(value);

alert(document.cookie); // ...; my%20name=John%20Smith</code></pre>
                      </div>
                    </div>
                  </div>
                  <div class="important important_warn">
                    <div class="important__header">
                      <span class="important__type">Limitations</span>
                    </div>
                    <div class="important__content">
                      <p>There are few limitations:</p>
                      <ul>
                        <li>
                          The <code>name=value</code> pair, after
                          <code>encodeURIComponent</code>, should not exceed
                          4KB. So we can’t store anything huge in a cookie.
                        </li>
                        <li>
                          The total number of cookies per domain is limited to
                          around 20+, the exact limit depends on the browser.
                        </li>
                      </ul>
                    </div>
                  </div>
                  <p>
                    Cookies have several options, many of them are important and
                    should be set.
                  </p>
                  <p>
                    The options are listed after <code>key=value</code>,
                    delimited by <code>;</code>, like this:
                  </p>
                  <div id="u55udn5z5l" data-trusted="1" class="code-example">
                    <div class="codebox code-example__codebox">
                      <div class="toolbar codebox__toolbar">
                        <div class="toolbar__tool">
                          <a
                            href="#"
                            title="run"
                            data-action="run"
                            class="toolbar__button toolbar__button_run"
                          ></a>
                        </div>
                        <div class="toolbar__tool">
                          <a
                            href="#"
                            title="open in sandbox"
                            target="_blank"
                            data-action="edit"
                            class="toolbar__button toolbar__button_edit"
                          ></a>
                        </div>
                      </div>
                      <div class="codebox__code" data-code="1">
                        <pre
                          class="line-numbers language-javascript"
                        ><code>document.cookie = &quot;user=John; path=/; expires=Tue, 19 Jan 2038 03:14:07 GMT&quot;</code></pre>
                      </div>
                    </div>
                  </div>
                  <h2>
                    <a class="main__anchor" name="path" href="#path">path</a>
                  </h2>
                  <ul>
                    <li>
                      <strong><code>path=/mypath</code></strong>
                    </li>
                  </ul>
                  <p>
                    The url path prefix must be absolute. It makes the cookie
                    accessible for pages under that path. By default, it’s the
                    current path.
                  </p>
                  <p>
                    If a cookie is set with <code>path=/admin</code>, it’s
                    visible at pages <code>/admin</code> and
                    <code>/admin/something</code>, but not at
                    <code>/home</code> or <code>/adminpage</code>.
                  </p>
                  <p>
                    Usually, we should set <code>path</code> to the root:
                    <code>path=/</code> to make the cookie accessible from all
                    website pages.
                  </p>
                  <h2>
                    <a class="main__anchor" name="domain" href="#domain"
                      >domain</a
                    >
                  </h2>
                  <ul>
                    <li>
                      <strong><code>domain=site.com</code></strong>
                    </li>
                  </ul>
                  <p>
                    A domain defines where the cookie is accessible. In practice
                    though, there are limitations. We can’t set any domain.
                  </p>
                  <p>
                    By default, a cookie is accessible only at the domain that
                    set it. So, if the cookie was set by <code>site.com</code>,
                    we won’t get it at <code>other.com</code>.
                  </p>
                  <p>
                    …But what’s more tricky, we also won’t get the cookie at a
                    subdomain <code>forum.site.com</code>!
                  </p>
                  <div id="qhl8wdf3e" data-trusted="1" class="code-example">
                    <div class="codebox code-example__codebox">
                      <div class="codebox__code" data-code="1">
                        <pre
                          class="line-numbers language-javascript"
                        ><code>// at site.com
document.cookie = &quot;user=John&quot;

// at forum.site.com
alert(document.cookie); // no user</code></pre>
                      </div>
                    </div>
                  </div>
                  <p>
                    <strong
                      >There’s no way to let a cookie be accessible from another
                      2nd-level domain, so <code>other.com</code> will never
                      receive a cookie set at <code>site.com</code>.</strong
                    >
                  </p>
                  <p>
                    It’s a safety restriction, to allow us to store sensitive
                    data in cookies, that should be available only on one site.
                  </p>
                  <p>
                    …But if we’d like to allow subdomains like
                    <code>forum.site.com</code> to get a cookie, that’s
                    possible. When setting a cookie at <code>site.com</code>, we
                    should explicitly set the <code>domain</code> option to the
                    root domain: <code>domain=site.com</code>:
                  </p>
                  <div id="sbrv5rsri8" data-trusted="1" class="code-example">
                    <div class="codebox code-example__codebox">
                      <div class="codebox__code" data-code="1">
                        <pre
                          class="line-numbers language-javascript"
                        ><code>// at site.com
// make the cookie accessible on any subdomain *.site.com:
document.cookie = &quot;user=John; domain=site.com&quot;

// later

// at forum.site.com
alert(document.cookie); // has cookie user=John</code></pre>
                      </div>
                    </div>
                  </div>
                  <p>
                    For historical reasons, <code>domain=.site.com</code> (a dot
                    before <code>site.com</code>) also works the same way,
                    allowing access to the cookie from subdomains. That’s an old
                    notation and should be used if we need to support very old
                    browsers.
                  </p>
                  <p>
                    So, the <code>domain</code> option allows to make a cookie
                    accessible at subdomains.
                  </p>
                  <h2>
                    <a
                      class="main__anchor"
                      name="expires-max-age"
                      href="#expires-max-age"
                      >expires, max-age</a
                    >
                  </h2>
                  <p>
                    By default, if a cookie doesn’t have one of these options,
                    it disappears when the browser is closed. Such cookies are
                    called “session cookies”
                  </p>
                  <p>
                    To let cookies survive a browser close, we can set either
                    the <code>expires</code> or <code>max-age</code> option.
                  </p>
                  <ul>
                    <li>
                      <strong
                        ><code
                          >expires=Tue, 19 Jan 2038 03:14:07 GMT</code
                        ></strong
                      >
                    </li>
                  </ul>
                  <p>
                    The cookie expiration date defines the time, when the
                    browser will automatically delete it.
                  </p>
                  <p>
                    The date must be exactly in this format, in the GMT
                    timezone. We can use <code>date.toUTCString</code> to get
                    it. For instance, we can set the cookie to expire in 1 day:
                  </p>
                  <div id="p61kquu29o" data-trusted="1" class="code-example">
                    <div class="codebox code-example__codebox">
                      <div class="codebox__code" data-code="1">
                        <pre
                          class="line-numbers language-javascript"
                        ><code>// +1 day from now
let date = new Date(Date.now() + 86400e3);
date = date.toUTCString();
document.cookie = &quot;user=John; expires=&quot; + date;</code></pre>
                      </div>
                    </div>
                  </div>
                  <p>
                    If we set <code>expires</code> to a date in the past, the
                    cookie is deleted.
                  </p>
                  <ul>
                    <li>
                      <strong><code>max-age=3600</code></strong>
                    </li>
                  </ul>
                  <p>
                    Is an alternative to <code>expires</code> and specifies the
                    cookie’s expiration in seconds from the current moment.
                  </p>
                  <p>
                    If set to zero or a negative value, the cookie is deleted:
                  </p>
                  <div id="b3u9i08seo" data-trusted="1" class="code-example">
                    <div class="codebox code-example__codebox">
                      <div class="codebox__code" data-code="1">
                        <pre
                          class="line-numbers language-javascript"
                        ><code>// cookie will die in +1 hour from now
document.cookie = &quot;user=John; max-age=3600&quot;;

// delete cookie (let it expire right now)
document.cookie = &quot;user=John; max-age=0&quot;;</code></pre>
                      </div>
                    </div>
                  </div>
                  <h2>
                    <a class="main__anchor" name="secure" href="#secure"
                      >secure</a
                    >
                  </h2>
                  <ul>
                    <li>
                      <strong><code>secure</code></strong>
                    </li>
                  </ul>
                  <p>The cookie should be transferred only over HTTPS.</p>
                  <p>
                    <strong
                      >By default, if we set a cookie at
                      <code>http://site.com</code>, then it also appears at
                      <code>https://site.com</code> and vice versa.</strong
                    >
                  </p>
                  <p>
                    That is, cookies are domain-based, they do not distinguish
                    between the protocols.
                  </p>
                  <p>
                    With this option, if a cookie is set by
                    <code>https://site.com</code>, then it doesn’t appear when
                    the same site is accessed by HTTP, as
                    <code>http://site.com</code>. So if a cookie has sensitive
                    content that should never be sent over unencrypted HTTP, the
                    <code>secure</code> flag is the right thing.
                  </p>
                  <div id="unx89jxv6c" data-trusted="1" class="code-example">
                    <div class="codebox code-example__codebox">
                      <div class="codebox__code" data-code="1">
                        <pre
                          class="line-numbers language-javascript"
                        ><code>// assuming we're on https:// now
// set the cookie to be secure (only accessible over HTTPS)
document.cookie = &quot;user=John; secure&quot;;</code></pre>
                      </div>
                    </div>
                  </div>
                  <h2>
                    <a class="main__anchor" name="samesite" href="#samesite"
                      >samesite</a
                    >
                  </h2>
                  <p>
                    That’s another security attribute <code>samesite</code>.
                    It’s designed to protect from so-called XSRF (cross-site
                    request forgery) attacks.
                  </p>
                  <p>
                    To understand how it works and when it’s useful, let’s take
                    a look at XSRF attacks.
                  </p>
                  <h3>
                    <a
                      class="main__anchor"
                      name="xsrf-attack"
                      href="#xsrf-attack"
                      >XSRF attack</a
                    >
                  </h3>
                  <p>
                    Imagine, you are logged into the site <code>bank.com</code>.
                    That is: you have an authentication cookie from that site.
                    Your browser sends it to <code>bank.com</code> with every
                    request, so that it recognizes you and performs all
                    sensitive financial operations.
                  </p>
                  <p>
                    Now, while browsing the web in another window, you
                    accidentally come to another site <code>evil.com</code>.
                    That site has JavaScript code that submits a form
                    <code
                      >&lt;form
                      action=&quot;https://bank.com/pay&quot;&gt;</code
                    >
                    to <code>bank.com</code> with fields that initiate a
                    transaction to the hacker’s account.
                  </p>
                  <p>
                    The browser sends cookies every time you visit the site
                    <code>bank.com</code>, even if the form was submitted from
                    <code>evil.com</code>. So the bank recognizes you and
                    actually performs the payment.
                  </p>
                  <figure>
                    <div class="image" style="width: 668px">
                      <div
                        class="image__ratio"
                        style="padding-top: 24.850299401197603%"
                      ></div>
                      <object
                        type="image/svg+xml"
                        data="/article/cookie/cookie-xsrf.svg"
                        width="668"
                        height="166"
                        class="image__image"
                      >
                        <img
                          src="/article/cookie/cookie-xsrf.svg"
                          alt=""
                          width="668"
                          height="166"
                        />
                      </object>
                    </div>
                  </figure>
                  <p>
                    That’s a so-called “Cross-Site Request Forgery” (in short,
                    XSRF) attack.
                  </p>
                  <p>
                    Real banks are protected from it of course. All forms
                    generated by <code>bank.com</code> have a special field, a
                    so-called “XSRF protection token”, that an evil page can’t
                    generate or extract from a remote page. It can submit a form
                    there, but can’t get the data back. The site
                    <code>bank.com</code> checks for such token in every form it
                    receives.
                  </p>
                  <p>
                    Such a protection takes time to implement though. We need to
                    ensure that every form has the required token field, and we
                    must also check all requests.
                  </p>
                  <h3>
                    <a
                      class="main__anchor"
                      name="enter-cookie-samesite-option"
                      href="#enter-cookie-samesite-option"
                      >Enter cookie samesite option</a
                    >
                  </h3>
                  <p>
                    The cookie <code>samesite</code> option provides another way
                    to protect from such attacks, that (in theory) should not
                    require “xsrf protection tokens”.
                  </p>
                  <p>It has two possible values:</p>
                  <ul>
                    <li>
                      <strong
                        ><code>samesite=strict</code> (same as
                        <code>samesite</code> without value)</strong
                      >
                    </li>
                  </ul>
                  <p>
                    A cookie with <code>samesite=strict</code> is never sent if
                    the user comes from outside the same site.
                  </p>
                  <p>
                    In other words, whether a user follows a link from their
                    mail or submits a form from <code>evil.com</code>, or does
                    any operation that originates from another domain, the
                    cookie is not sent.
                  </p>
                  <p>
                    If authentication cookies have the
                    <code>samesite</code> option, then a XSRF attack has no
                    chances to succeed, because a submission from
                    <code>evil.com</code> comes without cookies. So
                    <code>bank.com</code> will not recognize the user and will
                    not proceed with the payment.
                  </p>
                  <p>
                    The protection is quite reliable. Only operations that come
                    from <code>bank.com</code> will send the
                    <code>samesite</code> cookie, e.g. a form submission from
                    another page at <code>bank.com</code>.
                  </p>
                  <p>Although, there’s a small inconvenience.</p>
                  <p>
                    When a user follows a legitimate link to
                    <code>bank.com</code>, like from their own notes, they’ll be
                    surprised that <code>bank.com</code> does not recognize
                    them. Indeed, <code>samesite=strict</code> cookies are not
                    sent in that case.
                  </p>
                  <p>
                    We could work around that by using two cookies: one for
                    “general recognition”, only for the purposes of saying:
                    “Hello, John”, and the other one for data-changing
                    operations with <code>samesite=strict</code>. Then, a person
                    coming from outside of the site will see a welcome, but
                    payments must be initiated from the bank’s website, for the
                    second cookie to be sent.
                  </p>
                  <ul>
                    <li>
                      <strong><code>samesite=lax</code></strong>
                    </li>
                  </ul>
                  <p>
                    A more relaxed approach that also protects from XSRF and
                    doesn’t break the user experience.
                  </p>
                  <p>
                    Lax mode, just like <code>strict</code>, forbids the browser
                    to send cookies when coming from outside the site, but adds
                    an exception.
                  </p>
                  <p>
                    A <code>samesite=lax</code> cookie is sent if both of these
                    conditions are true:
                  </p>
                  <ol>
                    <li>
                      <p>The HTTP method is “safe” (e.g. GET, but not POST).</p>
                      <p>
                        The full list of safe HTTP methods is in the
                        <a href="https://tools.ietf.org/html/rfc7231"
                          >RFC7231 specification</a
                        >. Basically, these are the methods that should be used
                        for reading, but not writing the data. They must not
                        perform any data-changing operations. Following a link
                        is always GET, the safe method.
                      </p>
                    </li>
                    <li>
                      <p>
                        The operation performs a top-level navigation (changes
                        URL in the browser address bar).
                      </p>
                      <p>
                        That’s usually true, but if the navigation is performed
                        in an <code>&lt;iframe&gt;</code>, then it’s not
                        top-level. Also, JavaScript methods for network requests
                        do not perform any navigation, hence they don’t fit.
                      </p>
                    </li>
                  </ol>
                  <p>
                    So, what <code>samesite=lax</code> does, is to basically
                    allow the most common “go to URL” operation to have cookies.
                    E.g. opening a website link from notes that satisfy these
                    conditions.
                  </p>
                  <p>
                    But anything more complicated, like a network request from
                    another site or a form submission, loses cookies.
                  </p>
                  <p>
                    If that’s fine for you, then adding
                    <code>samesite=lax</code> will probably not break the user
                    experience and add protection.
                  </p>
                  <p>Overall, <code>samesite</code> is a great option.</p>
                  <p>There’s a drawback:</p>
                  <ul>
                    <li>
                      <code>samesite</code> is ignored (not supported) by very
                      old browsers, year 2017 or so.
                    </li>
                  </ul>
                  <p>
                    <strong
                      >So if we solely rely on <code>samesite</code> to provide
                      protection, then old browsers will be vulnerable.</strong
                    >
                  </p>
                  <p>
                    But we surely can use <code>samesite</code> together with
                    other protection measures, like xsrf tokens, to add an
                    additional layer of defence and then, in the future, when
                    old browsers die out, we’ll probably be able to drop xsrf
                    tokens.
                  </p>
                  <h2>
                    <a class="main__anchor" name="httponly" href="#httponly"
                      >httpOnly</a
                    >
                  </h2>
                  <p>
                    This option has nothing to do with JavaScript, but we have
                    to mention it for completeness.
                  </p>
                  <p>
                    The web-server uses the <code>Set-Cookie</code> header to
                    set a cookie. Also, it may set the
                    <code>httpOnly</code> option.
                  </p>
                  <p>
                    This option forbids any JavaScript access to the cookie. We
                    can’t see such a cookie or manipulate it using
                    <code>document.cookie</code>.
                  </p>
                  <p>
                    That’s used as a precaution measure, to protect from certain
                    attacks when a hacker injects his own JavaScript code into a
                    page and waits for a user to visit that page. That shouldn’t
                    be possible at all, hackers should not be able to inject
                    their code into our site, but there may be bugs that let
                    them do it.
                  </p>
                  <p>
                    Normally, if such a thing happens, and a user visits a
                    web-page with hacker’s JavaScript code, then that code
                    executes and gains access to
                    <code>document.cookie</code> with user cookies containing
                    authentication information. That’s bad.
                  </p>
                  <p>
                    But if a cookie is <code>httpOnly</code>, then
                    <code>document.cookie</code> doesn’t see it, so it is
                    protected.
                  </p>
                  <h2>
                    <a
                      class="main__anchor"
                      name="appendix-cookie-functions"
                      href="#appendix-cookie-functions"
                      >Appendix: Cookie functions</a
                    >
                  </h2>
                  <p>
                    Here’s a small set of functions to work with cookies, more
                    convenient than a manual modification of
                    <code>document.cookie</code>.
                  </p>
                  <p>
                    There exist many cookie libraries for that, so these are for
                    demo purposes. Fully working though.
                  </p>
                  <h3>
                    <a
                      class="main__anchor"
                      name="getcookie-name"
                      href="#getcookie-name"
                      >getCookie(name)</a
                    >
                  </h3>
                  <p>
                    The shortest way to access a cookie is to use a
                    <a href="/regular-expressions">regular expression</a>.
                  </p>
                  <p>
                    The function <code>getCookie(name)</code> returns the cookie
                    with the given <code>name</code>:
                  </p>
                  <div id="vbax271x6n" data-trusted="1" class="code-example">
                    <div class="codebox code-example__codebox">
                      <div class="codebox__code" data-code="1">
                        <pre
                          class="line-numbers language-javascript"
                        ><code>// returns the cookie with the given name,
// or undefined if not found
function getCookie(name) {
  let matches = document.cookie.match(new RegExp(
    &quot;(?:^|; )&quot; + name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, '\\$1') + &quot;=([^;]*)&quot;
  ));
  return matches ? decodeURIComponent(matches[1]) : undefined;
}</code></pre>
                      </div>
                    </div>
                  </div>
                  <p>
                    Here <code>new RegExp</code> is generated dynamically, to
                    match <code>; name=&lt;value&gt;</code>.
                  </p>
                  <p>
                    Please note that a cookie value is encoded, so
                    <code>getCookie</code> uses a built-in
                    <code>decodeURIComponent</code> function to decode it.
                  </p>
                  <h3>
                    <a
                      class="main__anchor"
                      name="setcookie-name-value-options"
                      href="#setcookie-name-value-options"
                      >setCookie(name, value, options)</a
                    >
                  </h3>
                  <p>
                    Sets the cookie’s <code>name</code> to the given
                    <code>value</code> with <code>path=/</code> by default (can
                    be modified to add other defaults):
                  </p>
                  <div id="yycabfursu" data-trusted="1" class="code-example">
                    <div class="codebox code-example__codebox">
                      <div class="toolbar codebox__toolbar">
                        <div class="toolbar__tool">
                          <a
                            href="#"
                            title="run"
                            data-action="run"
                            class="toolbar__button toolbar__button_run"
                          ></a>
                        </div>
                        <div class="toolbar__tool">
                          <a
                            href="#"
                            title="open in sandbox"
                            target="_blank"
                            data-action="edit"
                            class="toolbar__button toolbar__button_edit"
                          ></a>
                        </div>
                      </div>
                      <div class="codebox__code" data-code="1">
                        <pre
                          class="line-numbers language-javascript"
                        ><code>function setCookie(name, value, options = {}) {

  options = {
    path: '/',
    // add other defaults here if necessary
    ...options
  };

  if (options.expires instanceof Date) {
    options.expires = options.expires.toUTCString();
  }

  let updatedCookie = encodeURIComponent(name) + &quot;=&quot; + encodeURIComponent(value);

  for (let optionKey in options) {
    updatedCookie += &quot;; &quot; + optionKey;
    let optionValue = options[optionKey];
    if (optionValue !== true) {
      updatedCookie += &quot;=&quot; + optionValue;
    }
  }

  document.cookie = updatedCookie;
}

// Example of use:
setCookie('user', 'John', {secure: true, 'max-age': 3600});</code></pre>
                      </div>
                    </div>
                  </div>
                  <h3>
                    <a
                      class="main__anchor"
                      name="deletecookie-name"
                      href="#deletecookie-name"
                      >deleteCookie(name)</a
                    >
                  </h3>
                  <p>
                    To delete a cookie, we can call it with a negative
                    expiration date:
                  </p>
                  <div id="0nqvc5sdl3" data-trusted="1" class="code-example">
                    <div class="codebox code-example__codebox">
                      <div class="codebox__code" data-code="1">
                        <pre
                          class="line-numbers language-javascript"
                        ><code>function deleteCookie(name) {
  setCookie(name, &quot;&quot;, {
    'max-age': -1
  })
}</code></pre>
                      </div>
                    </div>
                  </div>
                  <div class="important important_warn">
                    <div class="important__header">
                      <span class="important__type"
                        >Updating or deleting must use same path and
                        domain</span
                      >
                    </div>
                    <div class="important__content">
                      <p>
                        Please note: when we update or delete a cookie, we
                        should use exactly the same path and domain options as
                        when we set it.
                      </p>
                    </div>
                  </div>
                  <p>
                    Together: <a href="/article/cookie/cookie.js">cookie.js</a>.
                  </p>
                  <h2>
                    <a
                      class="main__anchor"
                      name="appendix-third-party-cookies"
                      href="#appendix-third-party-cookies"
                      >Appendix: Third-party cookies</a
                    >
                  </h2>
                  <p>
                    A cookie is called “third-party” if it’s placed by a domain
                    other than the page the user is visiting.
                  </p>
                  <p>For instance:</p>
                  <ol>
                    <li>
                      <p>
                        A page at <code>site.com</code> loads a banner from
                        another site:
                        <code
                          >&lt;img
                          src=&quot;https://ads.com/banner.png&quot;&gt;</code
                        >.
                      </p>
                    </li>
                    <li>
                      <p>
                        Along with the banner, the remote server at
                        <code>ads.com</code> may set the
                        <code>Set-Cookie</code> header with a cookie like
                        <code>id=1234</code>. Such a cookie originates from the
                        <code>ads.com</code> domain, and will only be visible at
                        <code>ads.com</code>:
                      </p>
                      <figure>
                        <div class="image" style="width: 668px">
                          <div
                            class="image__ratio"
                            style="padding-top: 28.74251497005988%"
                          ></div>
                          <object
                            type="image/svg+xml"
                            data="/article/cookie/cookie-third-party.svg"
                            width="668"
                            height="192"
                            class="image__image"
                          >
                            <img
                              src="/article/cookie/cookie-third-party.svg"
                              alt=""
                              width="668"
                              height="192"
                            />
                          </object>
                        </div>
                      </figure>
                    </li>
                    <li>
                      <p>
                        Next time when <code>ads.com</code> is accessed, the
                        remote server gets the <code>id</code> cookie and
                        recognizes the user:
                      </p>
                      <figure>
                        <div class="image" style="width: 668px">
                          <div
                            class="image__ratio"
                            style="padding-top: 28.74251497005988%"
                          ></div>
                          <object
                            type="image/svg+xml"
                            data="/article/cookie/cookie-third-party-2.svg"
                            width="668"
                            height="192"
                            class="image__image"
                          >
                            <img
                              src="/article/cookie/cookie-third-party-2.svg"
                              alt=""
                              width="668"
                              height="192"
                            />
                          </object>
                        </div>
                      </figure>
                    </li>
                    <li>
                      <p>
                        What’s even more important is, when the user moves from
                        <code>site.com</code> to another site
                        <code>other.com</code>, which also has a banner, then
                        <code>ads.com</code> gets the cookie, as it belongs to
                        <code>ads.com</code>, thus recognizing the visitor and
                        tracking him as he moves between sites:
                      </p>
                      <figure>
                        <div class="image" style="width: 668px">
                          <div
                            class="image__ratio"
                            style="padding-top: 28.74251497005988%"
                          ></div>
                          <object
                            type="image/svg+xml"
                            data="/article/cookie/cookie-third-party-3.svg"
                            width="668"
                            height="192"
                            class="image__image"
                          >
                            <img
                              src="/article/cookie/cookie-third-party-3.svg"
                              alt=""
                              width="668"
                              height="192"
                            />
                          </object>
                        </div>
                      </figure>
                    </li>
                  </ol>
                  <p>
                    Third-party cookies are traditionally used for tracking and
                    ads services, due to their nature. They are bound to the
                    originating domain, so <code>ads.com</code> can track the
                    same user between different sites, if they all access it.
                  </p>
                  <p>
                    Naturally, some people don’t like being tracked, so browsers
                    allow to disable such cookies.
                  </p>
                  <p>
                    Also, some modern browsers employ special policies for such
                    cookies:
                  </p>
                  <ul>
                    <li>Safari does not allow third-party cookies at all.</li>
                    <li>
                      Firefox comes with a “black list” of third-party domains
                      where it blocks third-party cookies.
                    </li>
                  </ul>
                  <div class="important important_smart">
                    <div class="important__header">
                      <span class="important__type">Please note:</span>
                    </div>
                    <div class="important__content">
                      <p>
                        If we load a script from a third-party domain, like
                        <code
                          >&lt;script
                          src=&quot;https://google-analytics.com/analytics.js&quot;&gt;</code
                        >, and that script uses <code>document.cookie</code> to
                        set a cookie, then such cookie is not third-party.
                      </p>
                      <p>
                        If a script sets a cookie, then no matter where the
                        script came from – the cookie belongs to the domain of
                        the current webpage.
                      </p>
                    </div>
                  </div>
                  <h2>
                    <a
                      class="main__anchor"
                      name="appendix-gdpr"
                      href="#appendix-gdpr"
                      >Appendix: GDPR</a
                    >
                  </h2>
                  <p>
                    This topic is not related to JavaScript at all, just
                    something to keep in mind when setting cookies.
                  </p>
                  <p>
                    There’s a legislation in Europe called GDPR, that enforces a
                    set of rules for websites to respect the users’ privacy. One
                    of these rules is to require an explicit permission for
                    tracking cookies from the user.
                  </p>
                  <p>
                    Please note, that’s only about
                    tracking/identifying/authorizing cookies.
                  </p>
                  <p>
                    So, if we set a cookie that just saves some information, but
                    neither tracks nor identifies the user, then we are free to
                    do it.
                  </p>
                  <p>
                    But if we are going to set a cookie with an authentication
                    session or a tracking id, then a user must allow that.
                  </p>
                  <p>
                    Websites generally have two variants of following GDPR. You
                    must have seen them both already in the web:
                  </p>
                  <ol>
                    <li>
                      <p>
                        If a website wants to set tracking cookies only for
                        authenticated users.
                      </p>
                      <p>
                        To do so, the registration form should have a checkbox
                        like “accept the privacy policy” (that describes how
                        cookies are used), the user must check it, and then the
                        website is free to set auth cookies.
                      </p>
                    </li>
                    <li>
                      <p>
                        If a website wants to set tracking cookies for everyone.
                      </p>
                      <p>
                        To do so legally, a website shows a modal “splash
                        screen” for newcomers, and requires them to agree to the
                        cookies. Then the website can set them and let people
                        see the content. That can be disturbing for new visitors
                        though. No one likes to see such “must-click” modal
                        splash screens instead of the content. But GDPR requires
                        an explicit agreement.
                      </p>
                    </li>
                  </ol>
                  <p>
                    GDPR is not only about cookies, it’s about other
                    privacy-related issues too, but that’s too much beyond our
                    scope.
                  </p>
                  <h2>
                    <a class="main__anchor" name="summary" href="#summary"
                      >Summary</a
                    >
                  </h2>
                  <p><code>document.cookie</code> provides access to cookies</p>
                  <ul>
                    <li>
                      write operations modify only cookies mentioned in it.
                    </li>
                    <li>name/value must be encoded.</li>
                    <li>
                      one cookie must not exceed 4KB, 20+ cookies per site
                      (depends on the browser).
                    </li>
                  </ul>
                  <p>Cookie options:</p>
                  <ul>
                    <li>
                      <code>path=/</code>, by default current path, makes the
                      cookie visible only under that path.
                    </li>
                    <li>
                      <code>domain=site.com</code>, by default a cookie is
                      visible on the current domain only. If the domain is set
                      explicitly, the cookie becomes visible on subdomains.
                    </li>
                    <li>
                      <code>expires</code> or <code>max-age</code> sets the
                      cookie expiration time. Without them the cookie dies when
                      the browser is closed.
                    </li>
                    <li><code>secure</code> makes the cookie HTTPS-only.</li>
                    <li>
                      <code>samesite</code> forbids the browser to send the
                      cookie with requests coming from outside the site. This
                      helps to prevent XSRF attacks.
                    </li>
                  </ul>
                  <p>Additionally:</p>
                  <ul>
                    <li>
                      Third-party cookies may be forbidden by the browser, e.g.
                      Safari does that by default.
                    </li>
                    <li>
                      When setting a tracking cookie for EU citizens, GDPR
                      requires to ask for permission.
                    </li>
                  </ul>
                </div>
              </article>
            </div>
            <div class="page__nav-wrap">
              <a
                class="page__nav page__nav_prev"
                href="/data-storage"
                data-tooltip="Storing data in the browser"
                ><span class="page__nav-text"
                  ><span class="page__nav-text-shortcut"></span></span
                ><span class="page__nav-text-alternate"
                  >Previous lesson</span
                ></a
              ><a
                class="page__nav page__nav_next"
                href="/localstorage"
                data-tooltip="LocalStorage, sessionStorage"
                ><span class="page__nav-text"
                  ><span class="page__nav-text-shortcut"></span></span
                ><span class="page__nav-text-alternate">Next lesson</span></a
              >
            </div>
            <div class="article-tablet-foot tablet-only">
              <div class="article-tablet-foot__layout">
                <div class="share-icons">
                  <span class="share-icons__title">Share</span
                  ><a
                    class="share share_tw"
                    href="https://twitter.com/share?url=https%3A%2F%2Fjavascript.info%2Fcookie"
                    rel="nofollow"
                  ></a
                  ><a
                    class="share share_fb"
                    href="https://www.facebook.com/sharer/sharer.php?s=100&amp;p%5Burl%5D=https%3A%2F%2Fjavascript.info%2Fcookie"
                    rel="nofollow"
                  ></a>
                </div>
                <div class="article-tablet-foot__map">
                  <a class="map" href="/tutorial/map" data-action="tutorial-map"
                    ><span class="map__text">Tutorial map</span></a
                  >
                </div>
              </div>
            </div>
            <div class="comments formatted" id="comments">
              <div class="comments__header">
                <h2 class="comments__header-title">
                  <a href="#comments" name="comments">Comments</a>
                </h2>
                <div class="comments__read-before">
                  <span class="comments__read-before-link"
                    >read this before commenting…</span
                  >
                  <div class="comments__read-before-popup">
                    <div class="comments__read-before-popup-i">
                      <ul>
                        <li>
                          If you have suggestions what to improve - please
                          <a
                            href="https://github.com/javascript-tutorial/en.javascript.info/issues/new"
                            >submit a GitHub issue</a
                          >
                          or a pull request instead of commenting.
                        </li>
                        <li>
                          If you can't understand something in the article –
                          please elaborate.
                        </li>
                        <li>
                          To insert few words of code, use the
                          <code>&lt;code&gt;</code> tag, for several lines –
                          wrap them in <code>&lt;pre&gt;</code> tag, for more
                          than 10 lines – use a sandbox (<a
                            href="https://plnkr.co/edit/?p=preview"
                            >plnkr</a
                          >, <a href="https://jsbin.com">jsbin</a>,
                          <a href="http://codepen.io">codepen</a>…)
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
              <div id="disqus_thread"></div>
              <script>
                var disqus_config = function () {
                  if (!this.page) this.page = {};
                  Object.assign(this.page, {
                    url: "https:\/\/javascript.info\/cookie",
                    identifier: "\/cookie",
                  });
                };
              </script>
              <script>
                var disqus_shortname = "javascriptinfo";
              </script>
              <script>
                var disqus_enabled = true;
              </script>
            </div>
          </main>
        </div>
        <div class="sidebar page__sidebar sidebar sidebar_sticky-footer">
          <button class="sidebar__toggle" data-sidebar-toggle></button
          ><a
            class="map"
            href="/tutorial/map"
            data-action="tutorial-map"
            data-tooltip="Tutorial map"
          ></a>
          <div class="sidebar__inner">
            <div class="sidebar__content">
              <div class="sidebar__section">
                <h4 class="sidebar__section-title">Chapter</h4>
                <nav class="sidebar__navigation">
                  <ul class="sidebar__navigation-links">
                    <li class="sidebar__navigation-link">
                      <a class="sidebar__link" href="/data-storage"
                        >Storing data in the browser</a
                      >
                    </li>
                  </ul>
                </nav>
              </div>
              <div class="sidebar__section">
                <h4 class="sidebar__section-title">Lesson navigation</h4>
                <nav class="sidebar__navigation">
                  <ul class="sidebar__navigation-links">
                    <li class="sidebar__navigation-link">
                      <a
                        class="sidebar__link"
                        href="#reading-from-document-cookie"
                        >Reading from document.cookie</a
                      >
                    </li>
                    <li class="sidebar__navigation-link">
                      <a
                        class="sidebar__link"
                        href="#writing-to-document-cookie"
                        >Writing to document.cookie</a
                      >
                    </li>
                    <li class="sidebar__navigation-link">
                      <a class="sidebar__link" href="#path">path</a>
                    </li>
                    <li class="sidebar__navigation-link">
                      <a class="sidebar__link" href="#domain">domain</a>
                    </li>
                    <li class="sidebar__navigation-link">
                      <a class="sidebar__link" href="#expires-max-age"
                        >expires, max-age</a
                      >
                    </li>
                    <li class="sidebar__navigation-link">
                      <a class="sidebar__link" href="#secure">secure</a>
                    </li>
                    <li class="sidebar__navigation-link">
                      <a class="sidebar__link" href="#samesite">samesite</a>
                    </li>
                    <li class="sidebar__navigation-link">
                      <a class="sidebar__link" href="#httponly">httpOnly</a>
                    </li>
                    <li class="sidebar__navigation-link">
                      <a class="sidebar__link" href="#appendix-cookie-functions"
                        >Appendix: Cookie functions</a
                      >
                    </li>
                    <li class="sidebar__navigation-link">
                      <a
                        class="sidebar__link"
                        href="#appendix-third-party-cookies"
                        >Appendix: Third-party cookies</a
                      >
                    </li>
                    <li class="sidebar__navigation-link">
                      <a class="sidebar__link" href="#appendix-gdpr"
                        >Appendix: GDPR</a
                      >
                    </li>
                    <li class="sidebar__navigation-link">
                      <a class="sidebar__link" href="#summary">Summary</a>
                    </li>
                  </ul>
                </nav>
              </div>
              <div class="sidebar__section">
                <nav class="sidebar__navigation">
                  <ul class="sidebar__navigation-links">
                    <li class="sidebar__navigation-link">
                      <a class="sidebar__link" href="#comments">Comments</a>
                    </li>
                  </ul>
                </nav>
              </div>
              <div class="sidebar__section">
                <div class="sidebar__section-title">Share</div>
                <a
                  class="share share_tw sidebar__share"
                  href="https://twitter.com/share?url=https%3A%2F%2Fjavascript.info%2Fcookie"
                  rel="nofollow"
                ></a
                ><a
                  class="share share_fb sidebar__share"
                  href="https://www.facebook.com/sharer/sharer.php?s=100&amp;p[url]=https%3A%2F%2Fjavascript.info%2Fcookie"
                  rel="nofollow"
                ></a>
              </div>
              <div class="sidebar__section">
                <a
                  class="sidebar__link"
                  href="https://github.com/javascript-tutorial/en.javascript.info/blob/master/6-data-storage/01-cookie"
                  rel="nofollow"
                  >Edit on GitHub</a
                >
              </div>
              <div class="sidebar__section" id="sponsorBar">
                <div class="sidebar__section-title" id="sponsorBarTitle"></div>
                <div id="sponsorBarContent"></div>
                <script>
                  window.initSponsorBar();
                </script>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="page-footer">
      <ul class="page-footer__list">
        <li class="page-footer__item page-footer__item_copy">
          ©&nbsp;2007—2021&nbsp; Ilya Kantor
        </li>
        <li class="page-footer__item page-footer__item_about">
          <a class="page-footer__link" href="/about">about the project</a>
        </li>
        <li class="page-footer__item page-footer__item_contact">
          <a class="page-footer__link" href="/about#contact-us">contact us</a>
        </li>
        <li class="page-footer__item page-footer__item_terms">
          <a class="page-footer__link" href="/terms">terms of usage</a>
        </li>
        <li class="page-footer__item page-footer__item_privacy">
          <a class="page-footer__link" href="/privacy">privacy policy</a>
        </li>
      </ul>
    </div>
  </body>
</html>
